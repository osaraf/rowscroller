{"version":3,"file":"module.js","mappings":"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","sources":["webpack://osamahraf-rowscroller-panel/external amd \"module\"","webpack://osamahraf-rowscroller-panel/external amd \"@grafana/data\"","webpack://osamahraf-rowscroller-panel/external amd \"react\"","webpack://osamahraf-rowscroller-panel/webpack/bootstrap","webpack://osamahraf-rowscroller-panel/webpack/runtime/compat get default export","webpack://osamahraf-rowscroller-panel/webpack/runtime/define property getters","webpack://osamahraf-rowscroller-panel/webpack/runtime/hasOwnProperty shorthand","webpack://osamahraf-rowscroller-panel/webpack/runtime/make namespace object","webpack://osamahraf-rowscroller-panel/webpack/runtime/publicPath","webpack://osamahraf-rowscroller-panel/./node_modules/grafana-public-path.js","webpack://osamahraf-rowscroller-panel/./components/SimplePanel.tsx","webpack://osamahraf-rowscroller-panel/./module.ts"],"sourcesContent":["module.exports = __WEBPACK_EXTERNAL_MODULE__308__;","module.exports = __WEBPACK_EXTERNAL_MODULE__781__;","module.exports = __WEBPACK_EXTERNAL_MODULE__959__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"public/plugins/osamahraf-rowscroller-panel/\";","\nimport amdMetaModule from 'amd-module';\n\n__webpack_public_path__ =\n  amdMetaModule && amdMetaModule.uri\n    ? amdMetaModule.uri.slice(0, amdMetaModule.uri.lastIndexOf('/') + 1)\n    : 'public/plugins/osamahraf-rowscroller-panel/';\n","import React, { useEffect, useRef } from 'react';\nimport { PanelProps } from '@grafana/data';\nimport { SimpleOptions } from '../types';\n\ntype Props = PanelProps<SimpleOptions>;\nconst normalize = (s?: string | null) => (s ?? '').replace(/\\s+/g, ' ').trim().toLowerCase();\n\nfunction getScrollContainer(el: HTMLElement | null): HTMLElement {\n  let n: HTMLElement | null = el;\n  while (n && n !== document.body) {\n    const cs = getComputedStyle(n);\n    if (n.scrollHeight > n.clientHeight + 5 && /(auto|scroll)/.test(cs.overflowY)) return n;\n    n = n.parentElement;\n  }\n  return (document.scrollingElement as HTMLElement) || document.documentElement;\n}\nfunction parseBool(v: string | null | undefined): boolean | null {\n  if (v == null) return null;\n  if (/^(1|true|yes|on)$/i.test(v)) return true;\n  if (/^(0|false|no|off)$/i.test(v)) return false;\n  return null;\n}\nfunction alignToTop(scroller: HTMLElement, el: HTMLElement, extraOffset = 60) {\n  const sRect = scroller.getBoundingClientRect();\n  const eRect = el.getBoundingClientRect();\n  const nextTop = scroller.scrollTop + (eRect.top - sRect.top) - extraOffset;\n  scroller.scrollTo({ top: Math.max(0, nextTop), behavior: 'smooth' });\n}\n\nexport function SimplePanel(_: Props) {\n  const rootRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const params = new URLSearchParams(window.location.search);\n    const rowName = params.get('row');\n    if (!rowName) return;\n\n    const scroller = getScrollContainer(rootRef.current);\n    const target = normalize(rowName);\n    const expandOverride = parseBool(params.get('expand'));\n    const shouldExpand = expandOverride ?? true; // default: expand\n    const offsetParam = Number(params.get('offset'));\n    const topOffset = Number.isFinite(offsetParam) ? offsetParam : 60;\n\n    const findRowButton = (): HTMLButtonElement | null => {\n      const byId = Array.from(\n        document.querySelectorAll<HTMLButtonElement>('button[data-testid^=\"dashboard-row-title-\"]')\n      ).find((btn) => normalize(btn.textContent) === target);\n      if (byId) return byId;\n\n      const heading = Array.from(\n        document.querySelectorAll<HTMLElement>('button [role=\"heading\"]')\n      ).find((el) => normalize(el.textContent) === target);\n      return heading ? (heading.closest('button') as HTMLButtonElement) : null;\n    };\n\n    const isCollapsed = (btn: HTMLElement) =>\n      /expand row/i.test(btn.getAttribute('aria-label') || '');\n\n    let tries = 0;\n    const maxTries = 50;\n    const step = Math.max(200, Math.floor((scroller.clientHeight || 600) * 0.6));\n\n    const timer = setInterval(() => {\n      const btn = findRowButton();\n      if (btn) {\n        btn.scrollIntoView({ behavior: 'smooth', block: 'start' });\n        setTimeout(() => {\n          if (shouldExpand && isCollapsed(btn)) btn.click();\n          setTimeout(() => alignToTop(scroller, btn, topOffset), 150);\n        }, 120);\n        clearInterval(timer);\n        return;\n      }\n      scroller.scrollTop = Math.min(scroller.scrollTop + step, scroller.scrollHeight);\n      if (++tries >= maxTries) clearInterval(timer);\n    }, 200);\n\n    return () => clearInterval(timer);\n  }, []);\n\n  // invisible micro panel\n  return (\n    <div\n      ref={rootRef}\n      aria-hidden=\"true\"\n      style={{ width: 1, height: 1, opacity: 0, pointerEvents: 'none', overflow: 'hidden', position: 'relative' }}\n    />\n  );\n}\n\n","import { PanelPlugin } from '@grafana/data';\nimport { SimpleOptions } from './types';\nimport { SimplePanel } from './components/SimplePanel';\n\nexport const plugin = new PanelPlugin<SimpleOptions>(SimplePanel);\n"],"names":["module","exports","__WEBPACK_EXTERNAL_MODULE__308__","__WEBPACK_EXTERNAL_MODULE__781__","__WEBPACK_EXTERNAL_MODULE__959__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","p","slice","lastIndexOf","normalize","s","replace","trim","toLowerCase","plugin","PanelPlugin","_","rootRef","useRef","useEffect","params","URLSearchParams","window","location","search","rowName","scroller","el","document","body","cs","getComputedStyle","scrollHeight","clientHeight","test","overflowY","parentElement","scrollingElement","documentElement","getScrollContainer","current","target","expandOverride","v","shouldExpand","offsetParam","Number","topOffset","isFinite","tries","step","Math","max","floor","timer","setInterval","btn","byId","Array","from","querySelectorAll","find","textContent","heading","closest","findRowButton","scrollIntoView","behavior","block","setTimeout","getAttribute","isCollapsed","click","extraOffset","sRect","getBoundingClientRect","eRect","nextTop","scrollTop","top","scrollTo","alignToTop","clearInterval","min","div","ref","aria-hidden","style","width","height","opacity","pointerEvents","overflow","position"],"sourceRoot":""}